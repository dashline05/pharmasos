---
import Layout from "@/layouts/Base.astro";
import PharmacyList from "@/components/PharmacyList.astro";

// Validate the language parameter
const validLanguages = ['en', 'fr', 'ar'] as const;
type ValidLanguage = typeof validLanguages[number];

const { lang } = Astro.params;

// Ensure lang is a valid language
const currentLang: ValidLanguage = validLanguages.includes(lang as any) 
  ? (lang as ValidLanguage) 
  : 'fr';

export const getStaticPaths = () => {
  return validLanguages.map(lang => ({
    params: { lang },
    props: { lang }
  }));
};

const translations = {
  title: {
    fr: "Pharmacies de Garde",
    en: "On-Duty Pharmacies",
    ar: "صيدليات الحراسة"
  }
} satisfies Record<string, Record<ValidLanguage, string>>;
---

<Layout title={translations.title[currentLang]}>
  <PharmacyList lang={currentLang} />
</Layout> 